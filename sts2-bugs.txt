======= Bug =========

RandomScheduler?

Checking invariant
handleTick Actor[akka://new-system-0/user/raft-member-6#246399049]
handleTick Actor[akka://new-system-0/user/raft-member-7#-548325259]
[ERROR] [03/01/2015 18:35:51.006] [new-system-0-akka.actor.default-dispatcher-10] [akka://new-system-0/user/raft-member-9] null
java.util.NoSuchElementException
        at scala.collection.mutable.LinkedListLike$class.head(LinkedListLike.scala:75)
        at scala.collection.mutable.LinkedList.head(LinkedList.scala:80)
        at scala.collection.mutable.MutableList.head(MutableList.scala:53)
        at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
        at scala.collection.mutable.MutableList.foreach(MutableList.scala:29)
        at scala.collection.TraversableLike$WithFilter.foreach(TraversableLike.scala:777)
        at akka.dispatch.verification.ExternalEventInjector$class.send_external_messages(ExternalEventInjector.scala:130)
        at akka.dispatch.verification.RandomScheduler.send_external_messages(RandomScheduler.scala:32)
        at akka.dispatch.verification.ExternalEventInjector$class.send_external_messages(ExternalEventInjector.scala:114)
        at akka.dispatch.verification.RandomScheduler.send_external_messages(RandomScheduler.scala:32)
        at akka.dispatch.verification.RandomScheduler.schedule_new_message(RandomScheduler.scala:238)
        at akka.dispatch.verification.Instrumenter.afterMessageReceive(Instrumenter.scala:249)
        at sample.WeaveActor.ajc$after$sample_WeaveActor$3$79e3ab71(WeaveActor.aj:52)
        at akka.actor.ActorCell.receiveMessage(ActorCell.scala:516)
        at akka.actor.ActorCell.invoke(ActorCell.scala:487)
        at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:238)
        at akka.dispatch.Mailbox.run(Mailbox.scala:220)
        at akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinTask.exec(AbstractDispatcher.scala:393)
        at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
        at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
        at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
        at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)


======= Bug =========

RaftChecks.scala, LogMatch invariant:

java.lang.IndexOutOfBoundsException: 6
        at scala.collection.LinearSeqOptimized$class.apply(LinearSeqOptimized.scala:51)
        at scala.collection.immutable.List.apply(List.scala:83)
        at pl.project13.scala.akka.raft.model.ReplicatedLog.apply(ReplicatedLog.scala:81)
        at runner.raftchecks.LogMatchChecker$$anonfun$checkActor$1.apply(RaftChecks.scala:237)
        at runner.raftchecks.LogMatchChecker$$anonfun$checkActor$1.apply(RaftChecks.scala:219)
        at scala.collection.mutable.HashMap$$anonfun$foreach$1.apply(HashMap.scala:99)
        at scala.collection.mutable.HashMap$$anonfun$foreach$1.apply(HashMap.scala:99)
        at scala.collection.mutable.HashTable$class.foreachEntry(HashTable.scala:230)
        at scala.collection.mutable.HashMap.foreachEntry(HashMap.scala:40)
        at scala.collection.mutable.HashMap.foreach(HashMap.scala:99)
        at runner.raftchecks.LogMatchChecker.checkActor(RaftChecks.scala:219)
        at runner.raftchecks.RaftChecks.checkActor(RaftChecks.scala:179)
        at runner.raftchecks.RaftChecks$$anonfun$check$2.apply(RaftChecks.scala:140)
        at runner.raftchecks.RaftChecks$$anonfun$check$2.apply(RaftChecks.scala:138)
        at scala.collection.TraversableLike$WithFilter$$anonfun$foreach$1.apply(TraversableLike.scala:778)
        at scala.collection.mutable.HashMap$$anonfun$foreach$1.apply(HashMap.scala:99)
        at scala.collection.mutable.HashMap$$anonfun$foreach$1.apply(HashMap.scala:99)
        at scala.collection.mutable.HashTable$class.foreachEntry(HashTable.scala:230)
        at scala.collection.mutable.HashMap.foreachEntry(HashMap.scala:40)
        at scala.collection.mutable.HashMap.foreach(HashMap.scala:99)
        at scala.collection.TraversableLike$WithFilter.foreach(TraversableLike.scala:777)
        at runner.raftchecks.RaftChecks.check(RaftChecks.scala:138)

======= Bug =========

After many DDMIN(RandomFuzzer) runs (after split):

I'm guessing this is an issue with how we use AtomicEvents

Exception in thread "main" java.lang.RuntimeException: UnPartition without preceding Partition
        at akka.dispatch.verification.UnmodifiedEventDag$$anonfun$get_atomic_events$1.apply(Util.scala:217)
        at akka.dispatch.verification.UnmodifiedEventDag$$anonfun$get_atomic_events$1.apply(Util.scala:189)
        at scala.collection.immutable.List.foreach(List.scala:381)
        at scala.collection.generic.TraversableForwarder$class.foreach(TraversableForwarder.scala:35)
        at scala.collection.mutable.ListBuffer.foreach(ListBuffer.scala:45)
        at akka.dispatch.verification.UnmodifiedEventDag.get_atomic_events(Util.scala:189)
        at akka.dispatch.verification.EventDagView.get_atomic_events(Util.scala:266)
        at akka.dispatch.verification.DDMin.ddmin2(DeltaDebugging.scala:44)
        at akka.dispatch.verification.DDMin.ddmin2(DeltaDebugging.scala:78)
        at akka.dispatch.verification.DDMin.ddmin2(DeltaDebugging.scala:80)
        at akka.dispatch.verification.DDMin.ddmin2(DeltaDebugging.scala:80)
        at akka.dispatch.verification.DDMin.ddmin2(DeltaDebugging.scala:80)
        at akka.dispatch.verification.DDMin.ddmin2(DeltaDebugging.scala:80)
        at akka.dispatch.verification.DDMin.ddmin2(DeltaDebugging.scala:80)
        at akka.dispatch.verification.DDMin.ddmin2(DeltaDebugging.scala:78)
        at akka.dispatch.verification.DDMin.minimize(DeltaDebugging.scala:32)
        at akka.dispatch.verification.RunnerUtils$.randomDDMin(RunnerUtils.scala:72)
        at Main$.delayedEndpoint$Main$1(Runner.scala:146)
        at Main$delayedInit$body.apply(Runner.scala:89)
        at scala.Function0$class.apply$mcV$sp(Function0.scala:40)
        at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:12)
        at scala.App$$anonfun$main$1.apply(App.scala:76)
        at scala.App$$anonfun$main$1.apply(App.scala:76)
        at scala.collection.immutable.List.foreach(List.scala:381)
        at scala.collection.generic.TraversableForwarder$class.foreach(TraversableForwarder.scala:35)
        at scala.App$class.main(App.scala:76)
        at Main$.main(Runner.scala:89)
        at Main.main(Runner.scala)

======== Bug ========

While fuzzing:


[ERROR] [03/13/2015 01:43:37.685] [new-system-5527-akka.actor.default-dispatcher-9] [akka://new-system-5527/user/raft-member-1] null
java.util.NoSuchElementException
        at scala.collection.mutable.LinkedListLike$class.head(LinkedListLike.scala:75)
        at scala.collection.mutable.LinkedList.head(LinkedList.scala:80)
        at scala.collection.mutable.MutableList.head(MutableList.scala:53)
        at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
        at scala.collection.mutable.MutableList.foreach(MutableList.scala:29)
        at scala.collection.TraversableLike$WithFilter.foreach(TraversableLike.scala:777)
        at akka.dispatch.verification.ExternalEventInjector$class.send_external_messages(ExternalEventInjector.scala:139)
        at akka.dispatch.verification.RandomScheduler.send_external_messages(RandomScheduler.scala:35)
        at akka.dispatch.verification.ExternalEventInjector$class.send_external_messages(ExternalEventInjector.scala:123)
        at akka.dispatch.verification.RandomScheduler.send_external_messages(RandomScheduler.scala:35)
        at akka.dispatch.verification.RandomScheduler.schedule_new_message(RandomScheduler.scala:293)
        at akka.dispatch.verification.Instrumenter.start_dispatch(Instrumenter.scala:334)
        at akka.dispatch.verification.ExternalEventInjector$class.handle_quiescence(ExternalEventInjector.scala:325)
        at akka.dispatch.verification.RandomScheduler.handle_quiescence(RandomScheduler.scala:35)
        at akka.dispatch.verification.RandomScheduler.notify_quiescence(RandomScheduler.scala:335)
        at akka.dispatch.verification.Instrumenter.afterMessageReceive(Instrumenter.scala:276)
        at sample.WeaveActor.ajc$after$sample_WeaveActor$3$79e3ab71(WeaveActor.aj:53)
        at akka.actor.ActorCell.receiveMessage(ActorCell.scala:516)
        at akka.actor.ActorCell.invoke(ActorCell.scala:487)
        at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:238)
        at akka.dispatch.Mailbox.run(Mailbox.scala:220)
        at akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinTask.exec(AbstractDispatcher.scala:393)
        at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
        at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
        at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
        at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)


============= Bug ===========

Perhaps as a result of non-determinism:

[ERROR] [03/15/2015 00:16:03.718] [new-system-5-akka.actor.default-dispatcher-9] [akka://new-system-5/user/raft-member-3] Unexpected path
java.lang.Exception: Unexpected path
        at akka.dispatch.verification.DPORwHeuristics.setParentEvent(DPORwHeuristics.scala:170)
        at akka.dispatch.verification.DPORwHeuristics.schedule_new_message(DPORwHeuristics.scala:446)
        at akka.dispatch.verification.Instrumenter.afterMessageReceive(Instrumenter.scala:263)
        at sample.WeaveActor.ajc$after$sample_WeaveActor$3$79e3ab71(WeaveActor.aj:53)
        at akka.actor.ActorCell.receiveMessage(ActorCell.scala:516)
        at akka.actor.ActorCell.invoke(ActorCell.scala:487)
        at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:238)
        at akka.dispatch.Mailbox.run(Mailbox.scala:220)
        at akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinTask.exec(AbstractDispatcher.scala:393)
        at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
        at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
        at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
        at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
